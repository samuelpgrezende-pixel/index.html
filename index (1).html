<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>CRUD Simples - Produtos</title>

<style>
  body { font-family: Arial; margin: 20px; }
  h1 { text-align: center; }
  form { margin-bottom: 20px; }
  label { display: block; margin-top: 10px; }
  input, textarea { width: 100%; padding: 8px; margin-top: 5px; }
  button { margin-top: 10px; padding: 8px 12px; cursor: pointer; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
</style>

</head>
<body>

<h1>Sistema CRUD de Produtos</h1>

<form id="form">
  <input type="hidden" id="id">

  <label>Nome do Produto:</label>
  <input type="text" id="nome" required>

  <label>Preço:</label>
  <input type="number" id="preco" required>

  <label>Quantidade:</label>
  <input type="number" id="quantidade" required>

  <label>Descrição:</label>
  <textarea id="descricao"></textarea>

  <button type="submit">Salvar</button>
  <button type="button" onclick="cancelar()">Cancelar</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Nome</th>
      <th>Preço</th>
      <th>Quantidade</th>
      <th>Descrição</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody id="tabela"></tbody>
</table>

<script>
let produtos = JSON.parse(localStorage.getItem("produtos")) || [];
let editando = null;

function salvarLocal() {
  localStorage.setItem("produtos", JSON.stringify(produtos));
}

function atualizarTabela() {
  const tabela = document.getElementById("tabela");
  tabela.innerHTML = "";

  produtos.forEach((p, index) => {
    tabela.innerHTML += `
      <tr>
        <td>${index}</td>
        <td>${p.nome}</td>
        <td>${p.preco}</td>
        <td>${p.quantidade}</td>
        <td>${p.descricao}</td>
        <td>
          <button onclick="editar(${index})">Editar</button>
          <button onclick="excluir(${index})">Excluir</button>
        </td>
      </tr>
    `;
  });
}

document.getElementById("form").addEventListener("submit", function (e) {
  e.preventDefault();

  const nome = document.getElementById("nome").value;
  const preco = document.getElementById("preco").value;
  const quantidade = document.getElementById("quantidade").value;
  const descricao = document.getElementById("descricao").value;

  const produto = { nome, preco, quantidade, descricao };

  if (editando === null) {
    produtos.push(produto);
  } else {
    produtos[editando] = produto;
    editando = null;
  }

  salvarLocal();
  atualizarTabela();
  document.getElementById("form").reset();
});

function editar(i) {
  const p = produtos[i];
  editando = i;

  document.getElementById("nome").value = p.nome;
  document.getElementById("preco").value = p.preco;
  document.getElementById("quantidade").value = p.quantidade;
  document.getElementById("descricao").value = p.descricao;
}

function excluir(i) {
  produtos.splice(i, 1);
  salvarLocal();
  atualizarTabela();
}

function cancelar() {
  editando = null;
  document.getElementById("form").reset();
}

atualizarTabela();
</script>

</body>
</html>
